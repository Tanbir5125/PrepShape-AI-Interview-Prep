{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///Users/tannu/Desktop/Project/interview_prep/firebase/admin.ts"],"sourcesContent":["import { cert, getApps, initializeApp } from \"firebase-admin/app\"\nimport { getAuth } from \"firebase-admin/auth\";\nimport { getFirestore } from \"firebase-admin/firestore\";\n\nconst initFirebaseAdmin = () => {\n    const apps = getApps();\n\n    if(!apps.length){\n        initializeApp({\n            credential: cert({\n                projectId: process.env.FIREBASE_PROJECT_ID,\n                clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n                privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\"),\n            })\n        })\n    }\n    return {\n        auth: getAuth(),\n        db: getFirestore()\n    }\n}\n\nexport const {auth, db} = initFirebaseAdmin();"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;;AAEA,MAAM,oBAAoB;IACtB,MAAM,OAAO,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD;IAEnB,IAAG,CAAC,KAAK,MAAM,EAAC;QACZ,CAAA,GAAA,gJAAA,CAAA,gBAAa,AAAD,EAAE;YACV,YAAY,CAAA,GAAA,gJAAA,CAAA,OAAI,AAAD,EAAE;gBACb,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YAClE;QACJ;IACJ;IACA,OAAO;QACH,MAAM,CAAA,GAAA,kJAAA,CAAA,UAAO,AAAD;QACZ,IAAI,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IACnB;AACJ;AAEO,MAAM,EAAC,IAAI,EAAE,EAAE,EAAC,GAAG","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///Users/tannu/Desktop/Project/interview_prep/lib/actions/auth.action.ts"],"sourcesContent":["\"use server\";\n\nimport { auth, db } from \"@/firebase/admin\";\nimport { cookies } from \"next/headers\";\n\nconst ONE_WEEK = 60 * 60 * 24 * 7 // 7 days\n\nexport async function signUp(params: SignUpParams) {\n  const { uid, name, email } = params;\n\n  try {\n    const userRecord = await db.collection(\"users\").doc(uid).get();\n\n    if(userRecord.exists){\n        return {\n            success: false,\n            message: \"User already exists. Please sign in.\",\n        }\n    }\n    await db.collection(\"users\").doc(uid).set({\n        name, email\n    })\n\n    return {\n      success: true,\n      message: \"Account created successfully\",\n    }\n  } catch (error: any) {\n    console.error(\"Error during sign up:\", error);\n\n    if(error.code === \"auth/email-already-exists\"){\n        return {\n            success: false,\n            message: \"This email is already in use.\",\n        }\n    }\n    return {\n        success: false,\n        message: \"Failed to create an account\",\n    }\n  }\n}\n\nexport async function signIn(params:SignInParams) {\n  const { email, idToken } = params;\n\n  try {\n    const userRecord = await auth.getUserByEmail(email);\n\n    if (!userRecord) {\n      return {\n        success: false,\n        message: \"User not found. Please sign up.\",\n      }\n    }\n\n    await setSessionCookie(idToken);\n\n  } catch (error) {\n    console.error(error);\n    return {\n      success: false,\n      message: \"Failed to sign in\",\n    }\n  }\n}\n\nexport async function setSessionCookie(idToken : string) {\n  const cookieStore = await cookies()\n\n  const sessionCookie = await auth.createSessionCookie(idToken, {\n    expiresIn: ONE_WEEK * 1000, // Convert to milliseconds\n  })\n\n  cookieStore.set('session', sessionCookie, {\n    maxAge: ONE_WEEK,\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    path: '/',\n    sameSite: 'lax',\n  })\n}\n\nexport async function getCurrentUser(): Promise<User | null> {\n  const cookieStore = await cookies();\n\n  const sessionCookie = cookieStore.get('session')?.value;\n\n  if (!sessionCookie) {\n    return null;\n  }\n\n  try {\n    const decodedClaims = await auth.verifySessionCookie(sessionCookie, true);\n    const userRecord = await db.collection(\"users\").doc(decodedClaims.uid).get();\n    if (!userRecord.exists) {\n      return null;\n    }\n\n    return {\n      ...userRecord.data(),\n      id: decodedClaims.id,\n    } as User\n  } catch (error) {\n    console.error(\"Error getting current user:\", error);\n    return null;\n  }\n}\n\nexport async function isAuthenticated() {\n  const user = await getCurrentUser();\n\n  return !!user;\n}"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;;;;;;;;;;AAEA,MAAM,WAAW,KAAK,KAAK,KAAK,EAAE,SAAS;;AAEpC,eAAe,OAAO,MAAoB;IAC/C,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;IAE7B,IAAI;QACF,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG;QAE5D,IAAG,WAAW,MAAM,EAAC;YACjB,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QACA,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,KAAK,GAAG,CAAC;YACtC;YAAM;QACV;QAEA,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,yBAAyB;QAEvC,IAAG,MAAM,IAAI,KAAK,6BAA4B;YAC1C,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QACA,OAAO;YACH,SAAS;YACT,SAAS;QACb;IACF;AACF;AAEO,eAAe,OAAO,MAAmB;IAC9C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IAE3B,IAAI;QACF,MAAM,aAAa,MAAM,iHAAA,CAAA,OAAI,CAAC,cAAc,CAAC;QAE7C,IAAI,CAAC,YAAY;YACf,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;QAEA,MAAM,iBAAiB;IAEzB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO;YACL,SAAS;YACT,SAAS;QACX;IACF;AACF;AAEO,eAAe,iBAAiB,OAAgB;IACrD,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAEhC,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,SAAS;QAC5D,WAAW,WAAW;IACxB;IAEA,YAAY,GAAG,CAAC,WAAW,eAAe;QACxC,QAAQ;QACR,UAAU;QACV,QAAQ,oDAAyB;QACjC,MAAM;QACN,UAAU;IACZ;AACF;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAEhC,MAAM,gBAAgB,YAAY,GAAG,CAAC,YAAY;IAElD,IAAI,CAAC,eAAe;QAClB,OAAO;IACT;IAEA,IAAI;QACF,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,eAAe;QACpE,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,cAAc,GAAG,EAAE,GAAG;QAC1E,IAAI,CAAC,WAAW,MAAM,EAAE;YACtB,OAAO;QACT;QAEA,OAAO;YACL,GAAG,WAAW,IAAI,EAAE;YACpB,IAAI,cAAc,EAAE;QACtB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO;IACT;AACF;AAEO,eAAe;IACpB,MAAM,OAAO,MAAM;IAEnB,OAAO,CAAC,CAAC;AACX;;;IA1GsB;IAoCA;IAwBA;IAgBA;IA0BA;;AAtGA,+OAAA;AAoCA,+OAAA;AAwBA,+OAAA;AAgBA,+OAAA;AA0BA,+OAAA","debugId":null}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///Users/tannu/Desktop/Project/interview_prep/.next-internal/server/app/%28auth%29/sign-in/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {signIn as '4026c0f2e815bcae57c7bee9f892490234345f2ec7'} from 'ACTIONS_MODULE0'\nexport {signUp as '4093a3a96af9dd417d37d7ddcdf26fd8ad157cc0b4'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 286, "column": 0}, "map": {"version":3,"sources":["file:///Users/tannu/Desktop/Project/interview_prep/components/AuthForm.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/AuthForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/AuthForm.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA2R,GACxT,yDACA","debugId":null}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///Users/tannu/Desktop/Project/interview_prep/components/AuthForm.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/components/AuthForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/AuthForm.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAuQ,GACpS,qCACA","debugId":null}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 324, "column": 0}, "map": {"version":3,"sources":["file:///Users/tannu/Desktop/Project/interview_prep/app/%28auth%29/sign-in/page.tsx"],"sourcesContent":["import AuthForm from '@/components/AuthForm'\nimport React from 'react'\n\nconst page = () => {\n  return <AuthForm type=\"sign-in\" />\n}\n\nexport default page\n"],"names":[],"mappings":";;;;AAAA;;;AAGA,MAAM,OAAO;IACX,qBAAO,8OAAC,uHAAA,CAAA,UAAQ;QAAC,MAAK;;;;;;AACxB;uCAEe","debugId":null}}]
}